%%%%%%% The majority of notes and code is from the original AU template. Adjustments/Additions are indicated by SH (Simon Heuberger)
%Last modified: 2018 Apr 30
% SH modifications for Markdown made in February 2019

\documentclass[12pt,econ]{sources/authesis}
% IMPORTANT NOTES:
% 1) You MUST run LaTeX THREE times after runing BibTeX.
% 2) Make sure that you have the LATEST version of the AUTHESIS class files
%    before you hand in the final version of your thesis or dissertation.
% 3) SPA students can uncomment the next two lines:
%\renewcommand{\schoolorcollege}{School of Public Affairs}
%\renewcommand{\deansigline}{\parbox{2.1in}{Dean of the School}}

% \usepackage commands should go before the \begin{document}
%required packages
\usepackage{natbib}  % natbib citation style

%%% SH begin
% Removed \usepackage{url} and replaced it with the more functional {hyperref}
\usepackage[hidelinks]{hyperref}
%%% SH end

%optional packages

%CTABLE
%\usepackage{ctable} %You should learn about ctable!!

%ULEM
% IF you use the 'cas' option instead of the preferred 'econ' option,
% you MAY uncomment the following line.  (NOT recommended.)
%\usepackage{ulem}

% LONGTABLE
% To use longtable, add the following code to your preamble.
% Long table captions are single-spaced, but AU requires a
% double space between captions, so add to the pre-amble
% this redefinition (below) of the LT caption to your document.
% Also, attend to the order the captions are listed in the List of Tables.}
%%%%%%%%%%%% BEGIN longtable support code
\usepackage{longtable} %illustrate a problem with longtable
\def\ssp{\def\baselinestretch{1.0}\large\normalsize}
\def\dsp{\def\baselinestretch{1.67}\large\normalsize}
\makeatletter
\def\LT@makecaption#1#2#3{%
  \LT@mcol\LT@cols c{\hbox to\z@{\hss\parbox[t]\LTcapwidth{%
    \sbox\@tempboxa{#1{#2: }#3}%
    \ifdim\wd\@tempboxa>\hsize
      #1{#2. }\ssp #3%
    \else
      \hbox to\hsize{\hfil\box\@tempboxa\hfil}%
    \fi
    \endgraf\vskip\baselineskip}%
  \hss}}}
\def\LT@c@ption#1[#2]#3{%
  \LT@makecaption#1\fnum@table{#3}%
  \def\@tempa{#2}%
  \ifx\@tempa\@empty\else
     {\let\\\space
     \addcontentsline{lot}{table}{\protect\numberline{\thetable}{#2}}}%
     \addtocontents{lot}{\protect\addvspace{10\p@}}%
  \fi}
\makeatother
%%%%%%%%%%%% END longtable support code


%%% SH begin
% The following packages are for the LaTeX generated graph
\usepackage{lscape}
\usepackage{float} % to float stargazer tables with argument [t] specified in the AU thesis class

% FIGURES
%
$if(graphics)$
\usepackage{graphicx}
% The following generates all images so they have a width \maxwidth. This means that they will get their normal width if they fit onto the page, but are scaled down if they would overflow the margins:
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth
\else\Gin@nat@width\fi}
\makeatother
\let\Oldincludegraphics\includegraphics
\renewcommand{\includegraphics}[1]{\Oldincludegraphics[width=\maxwidth]{#1}}
% The following is repeated from the .cls file to make it appear in Markdown. The commands set the figure float, count etc.
\makeatletter
\def\fps@figure{t} 
\def\ftype@figure{1}
\def\ext@figure{lof}
\def\fnum@figure{\figurename~\thefigure}
\def\figure{\@float{figure}}
\let\endfigure\end@float
\@namedef{figure*}{\@dblfloat{figure}}
\@namedef{endfigure*}{\end@dblfloat}
\makeatother
% The following is repeated from the .cls file to make it appear in Markdown. The commands set the captions and also make the lof and lot double-spaced (unless it extends to more than one line, in which case it's single-spaced)
\makeatletter
\def\caption{\refstepcounter\@captype \@dblarg{\@caption\@captype}}
\long\def\@caption#1[#2]#3{%
  \par \par
  \addcontentsline{\csname ext@#1\endcsname}{#1}%
    {\protect\numberline{\csname the#1\endcsname.}{\ignorespaces #2}}%
  \addtocontents{\csname ext@#1\endcsname}{\protect\addvspace{10\p@}}%
  \begingroup
    \@parboxrestore
    \if@minipage
      \@setminipage
    \fi
    \normalsize
    \@makecaption{\csname fnum@#1\endcsname}{\ignorespaces #3}\par
  \endgroup}
\makeatother
$endif$

\title{$title$}
\author{$author$}
\degreeyear{$degreeyear$}
\degree{$degree$}
\chair{$chair$}
\secondreader{$secondreader$}
\thirdreader{$thirdreader$}
\fourthreader{$fourthreader$}
\degreefield{$degreefield$}
%%% SH end

\begin{document}

% Declarations for Front Matter
%
% IMPORTANT: IF A TITLE OR SUBTITLE EXCEEDS MORE THAN ONE LINE,
%            THERE SHOULD ONLY BE  48 CHARACTERS PER LINE.
%
% The dissertation title must be capitalized for AU-CAS

%%% SH begin
% \title{}, \author{}, \degree{}, \fourthreader etc. are all specified in the .Rmd. Any changes to the number of readers will also need to be made in "authesis.cls", like in the original template
%%% SH end

% The following command makes the title page, it is duplicated to produce
% two copies of cover page, as required by AU-CAS.

\maketitle

\maketitle

% The following command makes the copyright page

\copyrightpage

% The frontmatter environment uses roman lower case page numbering. The
% abstract, acknowledgements, table of contents, list of figures, and
% list of tables are a part of this environment.

\begin{frontmatter}

% The Guide requires one numbered abstract page.
% The 'abstractn' macro generates a numbered abstract page.
% Do NOT use the 'abstract' macro, which generates an unnumbered, abstract page.
% (NOTE: The Guide no longer requires two abstract pages, one numbered, one without numbers.)

%%% SH begin
\abstractn{$abstract$}
% The content of the abstract is specified in the .Rmd
%%% SH end

% Acknowledgements are optional. If you do not wish to include them,
% simply do not include this command in your source.

%%% SH begin
\acknowledgements{$acknowledgements$}
% The content of the acknowledgements is specified in the .Rmd
%%% SH end

\tableofcontents

\listoftables

\listoffigures

\end{frontmatter}

%%% SH begin
$body$
% $body$ refers to all main chapters, i.e. from the Introduction to the Conclusion. The content for these chapters are written in the respective .Rmd files
% The appendix is specified in appendix.Rmd
% References are specified in references.Rmd
% The bibliography and the style are specified in the header of skeleton.Rmd
%%% SH end

\end{document}


